{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let AdminPanelComponent = class AdminPanelComponent {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.isAdmin = false;\n    this.users = [];\n    this.stats = null;\n    this.loading = false;\n    this.searchTerm = '';\n    this.currentPage = 1;\n    this.totalPages = 1;\n    this.activeTab = 'users';\n    this.tabs = [{\n      id: 'users',\n      label: 'Users'\n    }, {\n      id: 'habits',\n      label: 'Habits'\n    }, {\n      id: 'challenges',\n      label: 'Challenges'\n    }, {\n      id: 'achievements',\n      label: 'Achievements'\n    }, {\n      id: 'system',\n      label: 'System'\n    }, {\n      id: 'analytics',\n      label: 'Analytics'\n    }];\n  }\n  ngOnInit() {\n    const user = this.authService.getCurrentUser();\n    console.log('Current user:', user); // Debug log\n    this.isAdmin = user?.isAdmin === true;\n    if (this.isAdmin) {\n      this.loadStats();\n      this.loadUsers();\n    } else {\n      console.log('User is not admin:', user?.isAdmin); // Debug log\n    }\n  }\n\n  loadStats() {\n    this.http.get('http://localhost:3000/api/admin/stats').subscribe(stats => {\n      this.stats = stats;\n    });\n  }\n  loadUsers() {\n    this.loading = true;\n    this.http.get(`http://localhost:3000/api/admin/users?page=${this.currentPage}&search=${this.searchTerm}`).subscribe(response => {\n      this.users = response.users;\n      this.totalPages = response.pagination.pages;\n      this.loading = false;\n    });\n  }\n  changePage(page) {\n    if (page >= 1 && page <= this.totalPages) {\n      this.currentPage = page;\n      this.loadUsers();\n    }\n  }\n  updateUserXP(userId, totalXP) {\n    this.http.put(`http://localhost:3000/api/admin/users/${userId}/xp`, {\n      totalXP\n    }).subscribe();\n  }\n  deleteUser(userId) {\n    if (confirm('Delete this user?')) {\n      this.http.delete(`http://localhost:3000/api/admin/users/${userId}`).subscribe(() => {\n        this.loadUsers();\n        this.loadStats();\n      });\n    }\n  }\n  clearAllData() {\n    if (confirm('‚ö†Ô∏è This will delete ALL user data. Continue?')) {\n      this.http.delete('http://localhost:3000/api/admin/clear-all').subscribe(() => {\n        this.loadUsers();\n        this.loadStats();\n      });\n    }\n  }\n};\nAdminPanelComponent = __decorate([Component({\n  selector: 'app-admin-panel',\n  template: `\n    <div *ngIf=\"isAdmin\" class=\"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300\">\n      <div class=\"max-w-7xl mx-auto px-4 py-8\">\n        <div class=\"flex items-center justify-between mb-8\">\n          <h1 class=\"text-3xl font-bold text-gray-900 dark:text-white\">üîê Admin Panel</h1>\n          <a routerLink=\"/dashboard\" \n             class=\"inline-flex items-center px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors\">\n            ‚Üê Back to Dashboard\n          </a>\n        </div>\n        \n        <!-- Stats -->\n        <div class=\"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-8\">\n          <div class=\"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-4 sm:p-6 text-white transition-all duration-300 transform hover:scale-105 hover:shadow-xl\">\n            <h3 class=\"text-sm sm:text-lg font-semibold mb-2\">Total Users</h3>\n            <p class=\"text-2xl sm:text-3xl font-bold animate-pulse\">{{ stats?.userCount || 0 }}</p>\n          </div>\n          <div class=\"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-4 sm:p-6 text-white transition-all duration-300 transform hover:scale-105 hover:shadow-xl\">\n            <h3 class=\"text-sm sm:text-lg font-semibold mb-2\">Active Habits</h3>\n            <p class=\"text-2xl sm:text-3xl font-bold animate-bounce\">{{ stats?.habitCount || 0 }}</p>\n          </div>\n          <div class=\"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white\">\n            <h3 class=\"text-lg font-semibold mb-2\">Challenges</h3>\n            <p class=\"text-3xl font-bold\">12</p>\n          </div>\n          <div class=\"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 text-white\">\n            <h3 class=\"text-lg font-semibold mb-2\">Achievements</h3>\n            <p class=\"text-3xl font-bold\">25</p>\n          </div>\n        </div>\n\n        <!-- Navigation Tabs -->\n        <div class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm mb-6\">\n          <div class=\"border-b border-gray-200 dark:border-gray-700\">\n            <nav class=\"flex space-x-8 px-6\">\n              <button\n                *ngFor=\"let tab of tabs\"\n                (click)=\"activeTab = tab.id\"\n                class=\"py-4 px-1 border-b-2 font-medium text-sm transition-colors\"\n                [ngClass]=\"{\n                  'border-red-500 text-red-600': activeTab === tab.id,\n                  'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300': activeTab !== tab.id\n                }\"\n              >\n                {{ tab.label }}\n              </button>\n            </nav>\n          </div>\n        </div>\n\n        <!-- Users Management -->\n        <div *ngIf=\"activeTab === 'users'\">\n        <!-- Users Table -->\n        <div class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 mb-6\">\n          <div class=\"flex justify-between items-center mb-4\">\n            <h2 class=\"text-xl font-bold text-gray-900 dark:text-white\">Users</h2>\n            <div class=\"flex space-x-4\">\n              <input\n                [(ngModel)]=\"searchTerm\"\n                (input)=\"loadUsers()\"\n                placeholder=\"Search users...\"\n                class=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n              >\n              <button\n                (click)=\"clearAllData()\"\n                class=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg\"\n              >\n                Clear All Data\n              </button>\n            </div>\n          </div>\n\n          <div *ngIf=\"loading\" class=\"text-center py-8\">\n            <app-loader text=\"Loading users...\"></app-loader>\n          </div>\n\n          <div *ngIf=\"!loading\" class=\"overflow-x-auto\">\n            <table class=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n              <thead class=\"bg-gray-50 dark:bg-gray-700\">\n                <tr>\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">User</th>\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">Level</th>\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">XP</th>\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">Actions</th>\n                </tr>\n              </thead>\n              <tbody class=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                <tr *ngFor=\"let user of users\">\n                  <td class=\"px-6 py-4 whitespace-nowrap\">\n                    <div class=\"text-sm font-medium text-gray-900 dark:text-white\">{{ user.username }}</div>\n                    <div class=\"text-sm text-gray-500 dark:text-gray-400\">{{ user.email }}</div>\n                  </td>\n                  <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">{{ user.level }}</td>\n                  <td class=\"px-6 py-4 whitespace-nowrap\">\n                    <input\n                      [(ngModel)]=\"user.totalXP\"\n                      (blur)=\"updateUserXP(user._id, user.totalXP)\"\n                      type=\"number\"\n                      class=\"w-20 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                    >\n                  </td>\n                  <td class=\"px-6 py-4 whitespace-nowrap text-sm\">\n                    <button\n                      *ngIf=\"!user.isAdmin\"\n                      (click)=\"deleteUser(user._id)\"\n                      class=\"text-red-600 hover:text-red-900 dark:text-red-400\"\n                    >\n                      Delete\n                    </button>\n                    <span *ngIf=\"user.isAdmin\" class=\"text-green-600 font-semibold\">\n                      üîê Admin\n                    </span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n\n            <!-- Pagination -->\n            <div class=\"flex justify-between items-center mt-4\">\n              <span class=\"text-sm text-gray-700 dark:text-gray-300\">\n                Page {{ currentPage }} of {{ totalPages }}\n              </span>\n              <div class=\"flex space-x-2\">\n                <button\n                  (click)=\"changePage(currentPage - 1)\"\n                  [disabled]=\"currentPage === 1\"\n                  class=\"px-3 py-2 border rounded-lg disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                >\n                  Previous\n                </button>\n                <button\n                  (click)=\"changePage(currentPage + 1)\"\n                  [disabled]=\"currentPage === totalPages\"\n                  class=\"px-3 py-2 border rounded-lg disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                >\n                  Next\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        </div>\n\n        <!-- Habits Management -->\n        <div *ngIf=\"activeTab === 'habits'\" class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">Habits Management</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <button class=\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìä View All Habits\n            </button>\n            <button class=\"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üéØ Create Habit Template\n            </button>\n            <button class=\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìà Habit Analytics\n            </button>\n          </div>\n        </div>\n\n        <!-- Challenges Management -->\n        <div *ngIf=\"activeTab === 'challenges'\" class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">Challenges Management</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <button class=\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              ‚ûï Create Challenge\n            </button>\n            <button class=\"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üëÅÔ∏è View Active Challenges\n            </button>\n            <button class=\"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìä Challenge Analytics\n            </button>\n          </div>\n        </div>\n\n        <!-- Achievements Management -->\n        <div *ngIf=\"activeTab === 'achievements'\" class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">Achievements Management</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <button class=\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üèÜ Create Achievement\n            </button>\n            <button class=\"bg-indigo-500 hover:bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üíé Manage Rewards\n            </button>\n            <button class=\"bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìà Achievement Stats\n            </button>\n          </div>\n        </div>\n\n        <!-- System Management -->\n        <div *ngIf=\"activeTab === 'system'\" class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">System Management</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <button (click)=\"clearAllData()\" class=\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üóëÔ∏è Clear All Data\n            </button>\n            <button class=\"bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üì§ Export Data\n            </button>\n            <button class=\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üíæ Backup Database\n            </button>\n            <button class=\"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìß Send Notifications\n            </button>\n            <button class=\"bg-indigo-500 hover:bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              ‚öôÔ∏è System Settings\n            </button>\n            <button class=\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìä Performance Monitor\n            </button>\n          </div>\n        </div>\n\n        <!-- Analytics -->\n        <div *ngIf=\"activeTab === 'analytics'\" class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">System Analytics</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div class=\"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg\">\n              <h3 class=\"font-semibold text-gray-900 dark:text-white mb-2\">User Growth</h3>\n              <p class=\"text-3xl font-bold text-blue-600\">+{{ stats?.userCount || 0 }}</p>\n              <p class=\"text-sm text-gray-500 dark:text-gray-400\">Total registered users</p>\n            </div>\n            <div class=\"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg\">\n              <h3 class=\"font-semibold text-gray-900 dark:text-white mb-2\">Active Habits</h3>\n              <p class=\"text-3xl font-bold text-green-600\">{{ stats?.habitCount || 0 }}</p>\n              <p class=\"text-sm text-gray-500 dark:text-gray-400\">Currently active habits</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div *ngIf=\"!isAdmin\" class=\"min-h-screen flex items-center justify-center\">\n      <div class=\"text-center\">\n        <h1 class=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">Access Denied</h1>\n        <p class=\"text-gray-600 dark:text-gray-300\">Admin access required</p>\n      </div>\n    </div>\n  `\n})], AdminPanelComponent);","map":{"version":3,"names":["Component","AdminPanelComponent","constructor","http","authService","isAdmin","users","stats","loading","searchTerm","currentPage","totalPages","activeTab","tabs","id","label","ngOnInit","user","getCurrentUser","console","log","loadStats","loadUsers","get","subscribe","response","pagination","pages","changePage","page","updateUserXP","userId","totalXP","put","deleteUser","confirm","delete","clearAllData","__decorate","selector","template"],"sources":["C:\\Users\\Suvojit\\OneDrive\\Desktop\\angular projects\\habittracker\\frontend\\src\\app\\features\\admin\\admin-panel.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AuthService } from '../../core/services/auth.service';\n\n@Component({\n  selector: 'app-admin-panel',\n  template: `\n    <div *ngIf=\"isAdmin\" class=\"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300\">\n      <div class=\"max-w-7xl mx-auto px-4 py-8\">\n        <div class=\"flex items-center justify-between mb-8\">\n          <h1 class=\"text-3xl font-bold text-gray-900 dark:text-white\">üîê Admin Panel</h1>\n          <a routerLink=\"/dashboard\" \n             class=\"inline-flex items-center px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors\">\n            ‚Üê Back to Dashboard\n          </a>\n        </div>\n        \n        <!-- Stats -->\n        <div class=\"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-8\">\n          <div class=\"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-4 sm:p-6 text-white transition-all duration-300 transform hover:scale-105 hover:shadow-xl\">\n            <h3 class=\"text-sm sm:text-lg font-semibold mb-2\">Total Users</h3>\n            <p class=\"text-2xl sm:text-3xl font-bold animate-pulse\">{{ stats?.userCount || 0 }}</p>\n          </div>\n          <div class=\"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-4 sm:p-6 text-white transition-all duration-300 transform hover:scale-105 hover:shadow-xl\">\n            <h3 class=\"text-sm sm:text-lg font-semibold mb-2\">Active Habits</h3>\n            <p class=\"text-2xl sm:text-3xl font-bold animate-bounce\">{{ stats?.habitCount || 0 }}</p>\n          </div>\n          <div class=\"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white\">\n            <h3 class=\"text-lg font-semibold mb-2\">Challenges</h3>\n            <p class=\"text-3xl font-bold\">12</p>\n          </div>\n          <div class=\"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 text-white\">\n            <h3 class=\"text-lg font-semibold mb-2\">Achievements</h3>\n            <p class=\"text-3xl font-bold\">25</p>\n          </div>\n        </div>\n\n        <!-- Navigation Tabs -->\n        <div class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm mb-6\">\n          <div class=\"border-b border-gray-200 dark:border-gray-700\">\n            <nav class=\"flex space-x-8 px-6\">\n              <button\n                *ngFor=\"let tab of tabs\"\n                (click)=\"activeTab = tab.id\"\n                class=\"py-4 px-1 border-b-2 font-medium text-sm transition-colors\"\n                [ngClass]=\"{\n                  'border-red-500 text-red-600': activeTab === tab.id,\n                  'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300': activeTab !== tab.id\n                }\"\n              >\n                {{ tab.label }}\n              </button>\n            </nav>\n          </div>\n        </div>\n\n        <!-- Users Management -->\n        <div *ngIf=\"activeTab === 'users'\">\n        <!-- Users Table -->\n        <div class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 mb-6\">\n          <div class=\"flex justify-between items-center mb-4\">\n            <h2 class=\"text-xl font-bold text-gray-900 dark:text-white\">Users</h2>\n            <div class=\"flex space-x-4\">\n              <input\n                [(ngModel)]=\"searchTerm\"\n                (input)=\"loadUsers()\"\n                placeholder=\"Search users...\"\n                class=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n              >\n              <button\n                (click)=\"clearAllData()\"\n                class=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg\"\n              >\n                Clear All Data\n              </button>\n            </div>\n          </div>\n\n          <div *ngIf=\"loading\" class=\"text-center py-8\">\n            <app-loader text=\"Loading users...\"></app-loader>\n          </div>\n\n          <div *ngIf=\"!loading\" class=\"overflow-x-auto\">\n            <table class=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n              <thead class=\"bg-gray-50 dark:bg-gray-700\">\n                <tr>\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">User</th>\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">Level</th>\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">XP</th>\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase\">Actions</th>\n                </tr>\n              </thead>\n              <tbody class=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                <tr *ngFor=\"let user of users\">\n                  <td class=\"px-6 py-4 whitespace-nowrap\">\n                    <div class=\"text-sm font-medium text-gray-900 dark:text-white\">{{ user.username }}</div>\n                    <div class=\"text-sm text-gray-500 dark:text-gray-400\">{{ user.email }}</div>\n                  </td>\n                  <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">{{ user.level }}</td>\n                  <td class=\"px-6 py-4 whitespace-nowrap\">\n                    <input\n                      [(ngModel)]=\"user.totalXP\"\n                      (blur)=\"updateUserXP(user._id, user.totalXP)\"\n                      type=\"number\"\n                      class=\"w-20 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                    >\n                  </td>\n                  <td class=\"px-6 py-4 whitespace-nowrap text-sm\">\n                    <button\n                      *ngIf=\"!user.isAdmin\"\n                      (click)=\"deleteUser(user._id)\"\n                      class=\"text-red-600 hover:text-red-900 dark:text-red-400\"\n                    >\n                      Delete\n                    </button>\n                    <span *ngIf=\"user.isAdmin\" class=\"text-green-600 font-semibold\">\n                      üîê Admin\n                    </span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n\n            <!-- Pagination -->\n            <div class=\"flex justify-between items-center mt-4\">\n              <span class=\"text-sm text-gray-700 dark:text-gray-300\">\n                Page {{ currentPage }} of {{ totalPages }}\n              </span>\n              <div class=\"flex space-x-2\">\n                <button\n                  (click)=\"changePage(currentPage - 1)\"\n                  [disabled]=\"currentPage === 1\"\n                  class=\"px-3 py-2 border rounded-lg disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                >\n                  Previous\n                </button>\n                <button\n                  (click)=\"changePage(currentPage + 1)\"\n                  [disabled]=\"currentPage === totalPages\"\n                  class=\"px-3 py-2 border rounded-lg disabled:opacity-50 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                >\n                  Next\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        </div>\n\n        <!-- Habits Management -->\n        <div *ngIf=\"activeTab === 'habits'\" class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">Habits Management</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <button class=\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìä View All Habits\n            </button>\n            <button class=\"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üéØ Create Habit Template\n            </button>\n            <button class=\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìà Habit Analytics\n            </button>\n          </div>\n        </div>\n\n        <!-- Challenges Management -->\n        <div *ngIf=\"activeTab === 'challenges'\" class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">Challenges Management</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <button class=\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              ‚ûï Create Challenge\n            </button>\n            <button class=\"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üëÅÔ∏è View Active Challenges\n            </button>\n            <button class=\"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìä Challenge Analytics\n            </button>\n          </div>\n        </div>\n\n        <!-- Achievements Management -->\n        <div *ngIf=\"activeTab === 'achievements'\" class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">Achievements Management</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <button class=\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üèÜ Create Achievement\n            </button>\n            <button class=\"bg-indigo-500 hover:bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üíé Manage Rewards\n            </button>\n            <button class=\"bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìà Achievement Stats\n            </button>\n          </div>\n        </div>\n\n        <!-- System Management -->\n        <div *ngIf=\"activeTab === 'system'\" class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">System Management</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <button (click)=\"clearAllData()\" class=\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üóëÔ∏è Clear All Data\n            </button>\n            <button class=\"bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üì§ Export Data\n            </button>\n            <button class=\"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üíæ Backup Database\n            </button>\n            <button class=\"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìß Send Notifications\n            </button>\n            <button class=\"bg-indigo-500 hover:bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              ‚öôÔ∏è System Settings\n            </button>\n            <button class=\"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold\">\n              üìä Performance Monitor\n            </button>\n          </div>\n        </div>\n\n        <!-- Analytics -->\n        <div *ngIf=\"activeTab === 'analytics'\" class=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6\">\n          <h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">System Analytics</h2>\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div class=\"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg\">\n              <h3 class=\"font-semibold text-gray-900 dark:text-white mb-2\">User Growth</h3>\n              <p class=\"text-3xl font-bold text-blue-600\">+{{ stats?.userCount || 0 }}</p>\n              <p class=\"text-sm text-gray-500 dark:text-gray-400\">Total registered users</p>\n            </div>\n            <div class=\"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg\">\n              <h3 class=\"font-semibold text-gray-900 dark:text-white mb-2\">Active Habits</h3>\n              <p class=\"text-3xl font-bold text-green-600\">{{ stats?.habitCount || 0 }}</p>\n              <p class=\"text-sm text-gray-500 dark:text-gray-400\">Currently active habits</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div *ngIf=\"!isAdmin\" class=\"min-h-screen flex items-center justify-center\">\n      <div class=\"text-center\">\n        <h1 class=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">Access Denied</h1>\n        <p class=\"text-gray-600 dark:text-gray-300\">Admin access required</p>\n      </div>\n    </div>\n  `\n})\nexport class AdminPanelComponent implements OnInit {\n  isAdmin = false;\n  users: any[] = [];\n  stats: any = null;\n  loading = false;\n  searchTerm = '';\n  currentPage = 1;\n  totalPages = 1;\n  activeTab = 'users';\n  \n  tabs = [\n    { id: 'users', label: 'Users' },\n    { id: 'habits', label: 'Habits' },\n    { id: 'challenges', label: 'Challenges' },\n    { id: 'achievements', label: 'Achievements' },\n    { id: 'system', label: 'System' },\n    { id: 'analytics', label: 'Analytics' }\n  ];\n\n  constructor(\n    private http: HttpClient,\n    private authService: AuthService\n  ) {}\n\n  ngOnInit(): void {\n    const user = this.authService.getCurrentUser();\n    console.log('Current user:', user); // Debug log\n    this.isAdmin = user?.isAdmin === true;\n    \n    if (this.isAdmin) {\n      this.loadStats();\n      this.loadUsers();\n    } else {\n      console.log('User is not admin:', user?.isAdmin); // Debug log\n    }\n  }\n\n  loadStats(): void {\n    this.http.get('http://localhost:3000/api/admin/stats').subscribe(stats => {\n      this.stats = stats;\n    });\n  }\n\n  loadUsers(): void {\n    this.loading = true;\n    this.http.get(`http://localhost:3000/api/admin/users?page=${this.currentPage}&search=${this.searchTerm}`)\n      .subscribe((response: any) => {\n        this.users = response.users;\n        this.totalPages = response.pagination.pages;\n        this.loading = false;\n      });\n  }\n\n  changePage(page: number): void {\n    if (page >= 1 && page <= this.totalPages) {\n      this.currentPage = page;\n      this.loadUsers();\n    }\n  }\n\n  updateUserXP(userId: string, totalXP: number): void {\n    this.http.put(`http://localhost:3000/api/admin/users/${userId}/xp`, { totalXP }).subscribe();\n  }\n\n  deleteUser(userId: string): void {\n    if (confirm('Delete this user?')) {\n      this.http.delete(`http://localhost:3000/api/admin/users/${userId}`).subscribe(() => {\n        this.loadUsers();\n        this.loadStats();\n      });\n    }\n  }\n\n  clearAllData(): void {\n    if (confirm('‚ö†Ô∏è This will delete ALL user data. Continue?')) {\n      this.http.delete('http://localhost:3000/api/admin/clear-all').subscribe(() => {\n        this.loadUsers();\n        this.loadStats();\n      });\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}